{
  "paths": {
    "/api/docent/courses": {
        "get": {
            "summary": "Haal vakken van docent op",
            "description": "Haalt alle vakken op waar de ingelogde docent les aan geeft, inclusief aantallen studenten en opdrachten.",
            "operationId": "getDocentCourses",
            "tags": [
                "Docenten"
            ],
            "security": [
                {
                    "bearerAuth": []
                }
            ],
            "responses": {
                "200": {
                    "description": "Lijst met vakken van de docent",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "courses": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "description": "Unieke ID van het vak"
                                                },
                                                "title": {
                                                    "type": "string",
                                                    "description": "Titel van het vak"
                                                },
                                                "description": {
                                                    "type": "string",
                                                    "description": "Beschrijving van het vak"
                                                },
                                                "joinCode": {
                                                    "type": "string",
                                                    "description": "Join code voor het vak"
                                                },
                                                "createdAt": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "Aanmaakdatum"
                                                },
                                                "updatedAt": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "Laatste wijzigingsdatum"
                                                },
                                                "studentCount": {
                                                    "type": "integer",
                                                    "description": "Aantal ingeschreven studenten"
                                                },
                                                "assignmentCount": {
                                                    "type": "integer",
                                                    "description": "Aantal opdrachten"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "example": {
                                "courses": [
                                    {
                                        "id": 1,
                                        "title": "Web Development",
                                        "description": "Leer moderne web development",
                                        "joinCode": "ABC123",
                                        "createdAt": "2024-01-01T00:00:00Z",
                                        "updatedAt": "2024-01-15T00:00:00Z",
                                        "studentCount": 25,
                                        "assignmentCount": 10
                                    }
                                ]
                            }
                        }
                    }
                },
                "401": {
                    "description": "Niet geauthenticeerd"
                },
                "500": {
                    "description": "Interne serverfout"
                }
            }
        }
    },
    "/api/docent/courses/{courseId}/students": {
        "get": {
            "summary": "Haal ingeschreven studenten op",
            "description": "Haalt een gepagineerde lijst op van studenten die zijn ingeschreven voor een specifieke cursus, met optionele filters en sortering.",
            "operationId": "getEnrolledStudents",
            "tags": [
                "Docenten"
            ],
            "parameters": [
                {
                    "name": "courseId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    },
                    "description": "ID van de cursus"
                },
                {
                    "name": "assignmentId",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string"
                    },
                    "description": "Filter op opdracht ID"
                },
                {
                    "name": "status",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string"
                    },
                    "description": "Filter op inleverstatus"
                },
                {
                    "name": "search",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string"
                    },
                    "description": "Zoek op naam of e-mail"
                },
                {
                    "name": "sortBy",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string",
                        "default": "name"
                    },
                    "description": "Sorteerveld (name, progress, lastSubmission, avgScore)"
                },
                {
                    "name": "sortOrder",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string",
                        "default": "asc"
                    },
                    "description": "Sorteervolgorde (asc, desc)"
                },
                {
                    "name": "page",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "integer",
                        "default": 1
                    },
                    "description": "Paginanummer"
                },
                {
                    "name": "limit",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "integer",
                        "default": 50
                    },
                    "description": "Aantal items per pagina"
                }
            ],
            "responses": {
                "200": {
                    "description": "Lijst met studenten en paginering metadata",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "students": {
                                        "type": "array",
                                        "items": {
                                            "type": "object"
                                        }
                                    },
                                    "pagination": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "400": {
                    "description": "Ontbrekende verplichte parameters"
                },
                "500": {
                    "description": "Interne serverfout"
                }
            }
        },
        "post": {
            "summary": "Voeg student toe aan cursus",
            "description": "Voegt een student toe aan een cursus op basis van e-mailadres. Deze functie valideert eerst of de student bestaat in het systeem, controleert of de student al is ingeschreven, en voegt vervolgens de enrollment toe. De operatie wordt volledig gelogd met gedetailleerde stappen voor debugging doeleinden.",
            "operationId": "addStudentToCourse",
            "tags": [
                "Docenten"
            ],
            "security": [
                {
                    "bearerAuth": []
                }
            ],
            "parameters": [
                {
                    "name": "courseId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    },
                    "description": "ID van de cursus",
                    "example": 1
                }
            ],
            "requestBody": {
                "required": true,
                "description": "Student email die toegevoegd moet worden",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "email": {
                                    "type": "string",
                                    "format": "email",
                                    "description": "E-mailadres van de student die toegevoegd moet worden",
                                    "example": "charlie.dev@example.com"
                                }
                            },
                            "required": [
                                "email"
                            ]
                        },
                        "examples": {
                            "validRequest": {
                                "summary": "Geldige request",
                                "value": {
                                    "email": "charlie.dev@example.com"
                                }
                            }
                        }
                    }
                }
            },
            "responses": {
                "201": {
                    "description": "Student succesvol toegevoegd aan de cursus",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "Student successfully added to the course"
                                    }
                                }
                            }
                        }
                    }
                },
                "400": {
                    "description": "Ongeldige input of missende velden",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "error": {
                                        "type": "string",
                                        "example": "email is required"
                                    }
                                }
                            },
                            "examples": {
                                "missingBody": {
                                    "summary": "Request body ontbreekt",
                                    "value": {
                                        "error": "Request body is missing",
                                        "hint": "Ensure you are sending a JSON body and setting Content-Type: application/json"
                                    }
                                },
                                "missingEmail": {
                                    "summary": "Email ontbreekt",
                                    "value": {
                                        "error": "email is required"
                                    }
                                },
                                "missingCourseId": {
                                    "summary": "Course ID ontbreekt",
                                    "value": {
                                        "error": "courseId is required"
                                    }
                                }
                            }
                        }
                    }
                },
                "401": {
                    "description": "Niet geauthenticeerd - JWT token ontbreekt of is ongeldig",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "error": {
                                        "type": "string",
                                        "example": "Geen token verstrekt."
                                    }
                                }
                            }
                        }
                    }
                },
                "403": {
                    "description": "Forbidden - Alleen docenten en admins hebben toegang",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "error": {
                                        "type": "string",
                                        "example": "FORBIDDEN"
                                    },
                                    "message": {
                                        "type": "string",
                                        "example": "Alleen docenten en admins hebben toegang tot deze functionaliteit"
                                    }
                                }
                            }
                        }
                    }
                },
                "404": {
                    "description": "Student niet gevonden met opgegeven e-mailadres",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "error": {
                                        "type": "string",
                                        "example": "Student not found with this email"
                                    }
                                }
                            }
                        }
                    }
                },
                "409": {
                    "description": "Student is al ingeschreven voor deze cursus",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "error": {
                                        "type": "string",
                                        "example": "Student is already enrolled in this course"
                                    }
                                }
                            }
                        }
                    }
                },
                "500": {
                    "description": "Interne serverfout",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "error": {
                                        "type": "string",
                                        "example": "Internal server error"
                                    },
                                    "message": {
                                        "type": "string",
                                        "example": "Database connection failed"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "x-logging": {
                "description": "Deze endpoint logt uitgebreide informatie voor debugging",
                "loggedInformation": [
                    "Request user (ID, email, role)",
                    "Course ID en student email",
                    "Database query resultaten per stap",
                    "Success/failure indicators",
                    "Complete error stack traces"
                ],
                "logLevels": {
                    "info": "Request details en success messages",
                    "error": "Database errors en validation failures"
                }
            }
        }
    },
    "/api/docent/courses/{courseId}/students/{studentId}": {
        "delete": {
            "summary": "Verwijder student uit cursus",
            "description": "Verwijdert een student uit een specifieke cursus.",
            "operationId": "removeStudentFromCourse",
            "tags": [
                "Docenten"
            ],
            "parameters": [
                {
                    "name": "courseId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    },
                    "description": "ID van de cursus"
                },
                {
                    "name": "studentId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    },
                    "description": "ID van de te verwijderen student"
                }
            ],
            "responses": {
                "200": {
                    "description": "Student succesvol verwijderd"
                },
                "400": {
                    "description": "Missing parameters"
                },
                "404": {
                    "description": "Student niet ingeschreven"
                },
                "500": {
                    "description": "Interne serverfout"
                }
            }
        }
    },
    "/api/docent/courses/{courseId}/student-status": {
        "get": {
            "summary": "Haal uitgebreide status van alle studenten op",
            "description": "Haalt een gepagineerde lijst op van studenten met gedetailleerde statistieken per student en per opdracht voor een specifieke cursus.",
            "operationId": "getStudentStatusByCourse",
            "tags": [
                "Docenten"
            ],
            "parameters": [
                {
                    "name": "courseId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    },
                    "description": "ID van de cursus"
                },
                {
                    "name": "search",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string"
                    },
                    "description": "Zoek op naam of e-mail"
                },
                {
                    "name": "sortBy",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string",
                        "default": "name",
                        "enum": ["name", "progress", "lastSubmission", "avgScore"]
                    },
                    "description": "Sorteerveld"
                },
                {
                    "name": "sortOrder",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string",
                        "default": "asc",
                        "enum": ["asc", "desc"]
                    },
                    "description": "Sorteervolgorde"
                },
                {
                    "name": "page",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "integer",
                        "default": 1
                    },
                    "description": "Paginanummer"
                },
                {
                    "name": "limit",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "integer",
                        "default": 50
                    },
                    "description": "Aantal items per pagina"
                }
            ],
            "responses": {
                "200": {
                    "description": "Lijst met studenten, hun statistieken en opdrachtenstatus",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "students": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "id": {"type": "integer"},
                                                "name": {"type": "string"},
                                                "email": {"type": "string"},
                                                "githubId": {"type": "string"},
                                                "statistics": {
                                                    "type": "object",
                                                    "properties": {
                                                        "totalAssignments": {"type": "integer"},
                                                        "totalSubmissions": {"type": "integer"},
                                                        "completedAssignments": {"type": "integer"},
                                                        "gradedAssignments": {"type": "integer"},
                                                        "pendingAssignments": {"type": "integer"},
                                                        "avgScore": {"type": "number", "nullable": true},
                                                        "avgFeedbackSeverity": {"type": "number", "nullable": true},
                                                        "lastSubmission": {"type": "string", "format": "date-time", "nullable": true},
                                                        "lastStatus": {"type": "string", "nullable": true},
                                                        "completionRate": {"type": "number"},
                                                        "gradedRate": {"type": "number"}
                                                    }
                                                },
                                                "assignments": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "assignmentId": {"type": "integer"},
                                                            "title": {"type": "string"},
                                                            "dueDate": {"type": "string", "format": "date-time"},
                                                            "status": {"type": "string"},
                                                            "lastSubmission": {"type": "string", "format": "date-time", "nullable": true},
                                                            "aiScore": {"type": "integer", "nullable": true},
                                                            "manualScore": {"type": "integer", "nullable": true},
                                                            "feedbackSeverity": {"type": "number", "nullable": true}
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    },
                                    "pagination": {
                                        "type": "object",
                                        "properties": {
                                            "currentPage": {"type": "integer"},
                                            "totalPages": {"type": "integer"},
                                            "totalItems": {"type": "integer"},
                                            "itemsPerPage": {"type": "integer"}
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "400": {
                    "description": "Ontbrekende verplichte parameters"
                },
                "500": {
                    "description": "Interne serverfout"
                }
            }
        }
    },
    "/api/docent/courses/{courseId}/students/{studentId}/status": {
        "get": {
            "summary": "Haal status van één specifieke student op",
            "description": "Haalt gedetailleerde statistieken en opdrachtenstatus op voor één specifieke student in een cursus.",
            "operationId": "getStudentStatusForStudent",
            "tags": [
                "Docenten"
            ],
            "parameters": [
                {
                    "name": "courseId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    },
                    "description": "ID van de cursus"
                },
                {
                    "name": "studentId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    },
                    "description": "ID van de student"
                }
            ],
            "responses": {
                "200": {
                    "description": "Studentgegevens met statistieken en opdrachtenstatus",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "student": {
                                        "type": "object",
                                        "properties": {
                                            "id": {"type": "integer"},
                                            "name": {"type": "string"},
                                            "email": {"type": "string"},
                                            "githubId": {"type": "string"},
                                            "statistics": {
                                                "type": "object",
                                                "properties": {
                                                    "totalAssignments": {"type": "integer"},
                                                    "totalSubmissions": {"type": "integer"},
                                                    "completedAssignments": {"type": "integer"},
                                                    "gradedAssignments": {"type": "integer"},
                                                    "pendingAssignments": {"type": "integer"},
                                                    "avgScore": {"type": "number", "nullable": true},
                                                    "avgFeedbackSeverity": {"type": "number", "nullable": true},
                                                    "lastSubmission": {"type": "string", "format": "date-time", "nullable": true},
                                                    "lastStatus": {"type": "string", "nullable": true},
                                                    "completionRate": {"type": "number"},
                                                    "gradedRate": {"type": "number"}
                                                }
                                            },
                                            "assignments": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "assignmentId": {"type": "integer"},
                                                        "title": {"type": "string"},
                                                        "dueDate": {"type": "string", "format": "date-time"},
                                                        "status": {"type": "string"},
                                                        "lastSubmission": {"type": "string", "format": "date-time", "nullable": true},
                                                        "aiScore": {"type": "integer", "nullable": true},
                                                        "manualScore": {"type": "integer", "nullable": true},
                                                        "feedbackSeverity": {"type": "number", "nullable": true}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "400": {
                    "description": "Ontbrekende verplichte parameters"
                },
                "404": {
                    "description": "Student niet gevonden in deze cursus"
                },
                "500": {
                    "description": "Interne serverfout"
                }
            }
        }
    }
  }
}