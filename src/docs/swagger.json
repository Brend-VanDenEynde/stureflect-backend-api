{
  "openapi": "3.0.0",
  "info": {
    "title": "StuReflect Backend API",
    "version": "1.0.0",
    "description": "Volledige API-documentatie voor StuReflect backend. Deze API biedt volledige ondersteuning voor authenticatie met JWT-tokens, gebruikersbeheer, cursusbeheer en geavanceerde monitoring van docent-leerling interacties. Alle endpoints ondersteunen JSON request/response format.",
    "contact": {
      "name": "API Ondersteuning",
      "email": "support@stureflect.com"
    },
    "license": {
      "name": "MIT"
    }
  },
  "servers": [
    {
      "url": "https://stureflect-backend-api.vercel.app",
      "description": "Productieserver"
    },
    {
      "url": "http://localhost:3000",
      "description": "Ontwikkelingserver"
    }
  ],
  "tags": [
    {
      "name": "Algemeen",
      "description": "Algemene endpoints voor API-gezondheid en informatie"
    },
    {
      "name": "Authenticatie",
      "description": "Endpoints voor gebruiker registratie en inloggen met JWT-authenticatie"
    },
    {
      "name": "Cursussen",
      "description": "Endpoints voor cursusbeheer en cursusgegevens"
    },
    {
      "name": "Docent - Leerlingenbeheer",
      "description": "Geavanceerde endpoints voor docenten om leerlingen en hun voortgang te beheren, inclusief scorebeheer en feedback"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "summary": "Controleert of de API beschikbaar is",
        "description": "Dit endpoint retourneert een welkomstbericht en kan gebruikt worden om te verifiëren dat de API online en beschikbaar is. Dit is handig voor health checks en monitoring.",
        "operationId": "getRootMessage",
        "tags": ["Algemeen"],
        "responses": {
          "200": {
            "description": "De API is beschikbaar en retourneert welkomstbericht",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "Hallo vanuit Express op Vercel!"
                }
              }
            }
          }
        }
      }
    },
    "/users/login": {
      "post": {
        "summary": "Gebruiker inloggen",
        "description": "Authenticeert een gebruiker met emailadres en wachtwoord. Bij succesvol inloggen wordt een JWT-token geretourneerd dat 1 uur geldig is. Dit token moet gebruikt worden in de Authorization header voor alle beveiligde endpoints. Het token moet in het formaat 'Bearer <token>' meegegeven worden.",
        "operationId": "loginUser",
        "tags": ["Authenticatie"],
        "requestBody": {
          "required": true,
          "description": "Gebruiker inloggegevens vereist",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "gebruiker@voorbeeld.nl",
                    "description": "Geregistreerd emailadres van de gebruiker. Dit emailadres moet exact overeenkomen met het ingeregistreerde adres."
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "VeiligWachtwoord123!",
                    "description": "Wachtwoord van de gebruiker (minimaal 6 tekens). Wachtwoorden zijn case-sensitief."
                  }
                },
                "required": ["email", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Succesvol ingelogd - JWT-token ontvangen",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJnZWJydWlrZXJAZm9vcmJlZWxkLm5sIiwicm9sZSI6InN0dWRlbnQiLCJpYXQiOjE2OTI4MDAwMDAsImV4cCI6MTY5MjgwMzYwMH0.signature",
                      "description": "JWT-token met 1 uur geldigheid (3600 seconden). Gebruik dit token in de Authorization header: 'Authorization: Bearer <token>'. Na afloop van 1 uur moet opnieuw ingelogd worden."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Ongeldig verzoek - emailadres of wachtwoord ontbreekt",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Emailadres en wachtwoord zijn verplicht."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Gebruiker niet gevonden",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Gebruiker met dit emailadres is niet geregistreerd."
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Ongeldige inloggegevens - wachtwoord is onjuist",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Het ingevoerde wachtwoord is onjuist."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Interne serverfout",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Er is iets misgegaan bij het verwerken van uw verzoek."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/register": {
      "post": {
        "summary": "Nieuw gebruikersaccount aanmaken",
        "description": "Registreert een nieuwe gebruiker in het systeem. Het wachtwoord wordt veilig versleuteld opgeslagen met bcrypt. Na succesvolle registratie kan de gebruiker inloggen met het loginendpoint. Elk emailadres kan slechts eenmaal gebruikt worden.",
        "operationId": "registerUser",
        "tags": ["Authenticatie"],
        "requestBody": {
          "required": true,
          "description": "Registratiegegevens voor nieuwe gebruiker",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "nieuwegebruiker@voorbeeld.nl",
                    "description": "Uniek emailadres voor het nieuwe account. Dit emailadres mag niet al in het systeem geregistreerd zijn."
                  },
                  "name": {
                    "type": "string",
                    "example": "Jan Jansen",
                    "description": "Volledige naam van de gebruiker. Dit wordt gebruikt voor weergave in het systeem."
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "VeiligWachtwoord123!",
                    "description": "Wachtwoord van minimaal 6 tekens. Gebruik minimaal een mix van hoofdletters, kleine letters en nummers voor extra veiligheid."
                  },
                  "role": {
                    "type": "string",
                    "enum": ["student", "docent", "beheerder"],
                    "example": "student",
                    "description": "Optioneel: gebruikersrol in het systeem. Standaard is 'student'. Beschikbare rollen: student, docent, beheerder."
                  }
                },
                "required": ["email", "name", "password"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Gebruiker succesvol aangemaakt - Kan nu inloggen",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "integer",
                      "example": 1,
                      "description": "Unieke gebruiker ID in het systeem"
                    },
                    "email": {
                      "type": "string",
                      "example": "nieuwegebruiker@voorbeeld.nl",
                      "description": "Geregistreerd emailadres van de nieuwe gebruiker"
                    },
                    "name": {
                      "type": "string",
                      "example": "Jan Jansen",
                      "description": "Volledige naam van de gebruiker"
                    },
                    "role": {
                      "type": "string",
                      "example": "student",
                      "description": "Toegewezen rol van de gebruiker"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Ongeldig verzoek - emailadres al in gebruik of ongeldige gegevens",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Dit emailadres is al geregistreerd in het systeem."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Interne serverfout",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Er is iets misgegaan bij het registreren van de gebruiker."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/courses": {
      "get": {
        "summary": "Alle beschikbare cursussen ophalen",
        "description": "Retourneert een volledige lijst met alle beschikbare cursussen in het systeem. Elke cursus bevat zijn unieke ID, titel, beschrijving en deelcode. Dit endpoint biedt een overzicht van alle cursussen waar leerlingen zich bij kunnen aansluiten.",
        "operationId": "getAllCourses",
        "tags": ["Cursussen"],
        "responses": {
          "200": {
            "description": "Cursussen succesvol opgehaald",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true,
                      "description": "Status van de request - true bij succes"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Cursus"
                      },
                      "description": "Array met alle beschikbare cursussen"
                    },
                    "message": {
                      "type": "string",
                      "example": "5 cursussen gevonden",
                      "description": "Aanvullend bericht over het aantal gevonden cursussen"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Interne serverfout bij ophalen cursussen",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Er is een fout opgetreden bij het ophalen van de cursussen uit de database"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/teachers/{teacherId}/classes/{classId}/students": {
      "get": {
        "summary": "Alle leerlingen van een cursus ophalen",
        "description": "Haalt een volledige lijst op met alle ingeschreven leerlingen voor een specifieke cursus. Geeft per leerling informatie over hun profiel, inschrijfdatum en voortgang. Kan gesorteerd worden op naam, email of inschrijfdatum. Alleen beschikbaar voor de docent die eigenaar is van deze cursus.",
        "tags": ["Docent - Leerlingenbeheer"],
        "parameters": [
          {
            "name": "teacherId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de ingelogde docent"
          },
          {
            "name": "classId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de cursus waarvoor leerlingen opgehaald moeten worden"
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": { "type": "string", "enum": ["name", "email", "created_at"], "default": "name" },
            "description": "Veld waarop gesorteerd moet worden: 'name' (voornaam), 'email' (emailadres) of 'created_at' (inschrijfdatum)"
          },
          {
            "name": "order",
            "in": "query",
            "schema": { "type": "string", "enum": ["ASC", "DESC"], "default": "ASC" },
            "description": "Sorteerrichting: 'ASC' (oplopend) of 'DESC' (aflopend)"
          }
        ],
        "responses": {
          "200": {
            "description": "Lijst met alle leerlingen van de cursus",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/LeerlingLijstItem"
                      },
                      "description": "Array met leerlingen in de cursus"
                    },
                    "message": { "type": "string", "example": "15 leerlingen gevonden in deze cursus" }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geen toegang tot deze cursus",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "message": { "type": "string", "example": "Je hebt geen toegang tot deze cursus" }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Interne serverfout",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "message": { "type": "string", "example": "Fout bij ophalen leerlingen" }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Leerlingen inschrijven in cursus",
        "description": "Schrijft één of meerdere leerlingen in voor een cursus. Accepteert een array met leerling IDs. Retourneert het aantal succesvol ingeschreven leerlingen en mogelijke fouten. Alleen beschikbaar voor de eigenaar van de cursus.",
        "tags": ["Docent - Leerlingenbeheer"],
        "parameters": [
          {
            "name": "teacherId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de docent"
          },
          {
            "name": "classId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de cursus"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Array met leerling IDs die ingeschreven moeten worden",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "studentIds": {
                    "type": "array",
                    "items": { "type": "integer" },
                    "description": "Array van unieke leerling IDs die ingeschreven moeten worden",
                    "example": [1, 2, 3, 4, 5]
                  }
                },
                "required": ["studentIds"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Leerlingen succesvol ingeschreven",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "enrolled": { "type": "integer", "example": 5, "description": "Aantal succesvol ingeschreven leerlingen" },
                        "failed": { "type": "integer", "example": 0, "description": "Aantal mislukte inschrijvingen" },
                        "errors": { "type": "array", "description": "Array met foutmeldingen voor mislukte inschrijvingen" }
                      }
                    },
                    "message": { "type": "string", "example": "5 leerlingen ingeschreven in de cursus" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Ongeldig verzoek - studentIds ontbreekt of is leeg",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "message": { "type": "string", "example": "studentIds moet een niet-lege array zijn" }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geen toegang tot cursus",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "message": { "type": "string", "example": "Je bent niet de eigenaar van deze cursus" }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Meerdere leerlingen uit cursus verwijderen",
        "description": "Verwijdert meerdere leerlingen in één operatie uit een cursus. Dit is een bulk operatie die handig is voor groepsverwijderingen. Retourneert het aantal succesvol verwijderde leerlingen.",
        "tags": ["Docent - Leerlingenbeheer"],
        "parameters": [
          {
            "name": "teacherId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de docent"
          },
          {
            "name": "classId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de cursus"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Array met leerling IDs die verwijderd moeten worden",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "studentIds": {
                    "type": "array",
                    "items": { "type": "integer" },
                    "description": "Array van leerling IDs die uit de cursus verwijderd moeten worden",
                    "example": [1, 2]
                  }
                },
                "required": ["studentIds"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Leerlingen succesvol verwijderd",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "deleted": { "type": "integer", "example": 2, "description": "Aantal verwijderde leerlingen" },
                        "failed": { "type": "integer", "example": 0, "description": "Aantal mislukte verwijderingen" }
                      }
                    },
                    "message": { "type": "string", "example": "2 leerlingen uit de cursus verwijderd" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Ongeldig verzoek",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "message": { "type": "string", "example": "studentIds moet een niet-lege array zijn" }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geen toegang tot cursus",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/teachers/{teacherId}/classes/{classId}/students/{studentId}": {
      "delete": {
        "summary": "Enkele leerling uit cursus verwijderen",
        "description": "Verwijdert een enkele leerling uit een cursus. Dit endpoint verbreekt de koppeling tussen de leerling en de cursus, maar verwijdert niet de leerling zelf uit het systeem.",
        "tags": ["Docent - Leerlingenbeheer"],
        "parameters": [
          {
            "name": "teacherId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de docent"
          },
          {
            "name": "classId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de cursus"
          },
          {
            "name": "studentId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de leerling die verwijderd moet worden"
          }
        ],
        "responses": {
          "200": {
            "description": "Leerling succesvol uit cursus verwijderd",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "studentId": { "type": "integer", "example": 5 },
                        "classId": { "type": "integer", "example": 1 }
                      }
                    },
                    "message": { "type": "string", "example": "Leerling succesvol uit cursus verwijderd" }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geen toegang tot cursus",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Leerling-cursus combinatie niet gevonden",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "message": { "type": "string", "example": "Deze leerling is niet ingeschreven in deze cursus" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/teachers/{teacherId}/students/{studentId}": {
      "get": {
        "summary": "Leerlingprofiel ophalen",
        "description": "Haalt gedetailleerde profiel- en basisinformatie van een leerling op. Inclusief persoonlijke gegevens, registratiedatum en contactgegevens. Alleen beschikbaar voor docenten die deze leerling in hun cursussen hebben.",
        "tags": ["Docent - Leerlingenbeheer"],
        "parameters": [
          {
            "name": "teacherId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de docent"
          },
          {
            "name": "studentId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de leerling"
          }
        ],
        "responses": {
          "200": {
            "description": "Leerlingprofiel opgehaald",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "$ref": "#/components/schemas/LeerlingProfiel"
                    },
                    "message": { "type": "string", "example": "Leerlingprofiel opgehaald" }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geen toegang tot deze leerling",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Leerling niet gevonden",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/teachers/{teacherId}/students/{studentId}/progress": {
      "get": {
        "summary": "Voortgangsoverzicht leerling",
        "description": "Haalt een gedetailleerd voortgangsoverzicht op van een leerling met inzendingen, behaalde scores en statistieken. Geeft inzicht in de totale voortgang, gemiddelde score, en verdeling van inzendingen per status.",
        "tags": ["Docent - Leerlingenbeheer"],
        "parameters": [
          {
            "name": "teacherId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de docent"
          },
          {
            "name": "studentId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de leerling"
          }
        ],
        "responses": {
          "200": {
            "description": "Voortgangsoverzicht opgehaald",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "$ref": "#/components/schemas/LeerlingVoortgang"
                    },
                    "message": { "type": "string", "example": "Voortgang opgehaald" }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geen toegang tot leerling",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/teachers/{teacherId}/students/{studentId}/submissions": {
      "get": {
        "summary": "Alle inzendingen van leerling ophalen",
        "description": "Haalt alle inzendingen (opdrachten) van een leerling op. Kan gefilterd worden op specifieke opdracht of inzendingsstatus. Bevat informatie over scores (AI en handmatig) en GitHub-koppelingen.",
        "tags": ["Docent - Leerlingenbeheer"],
        "parameters": [
          {
            "name": "teacherId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de docent"
          },
          {
            "name": "studentId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de leerling"
          },
          {
            "name": "assignmentId",
            "in": "query",
            "schema": { "type": "integer" },
            "description": "Optioneel: filter inzendingen op specifieke opdracht ID"
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string", "enum": ["pending", "completed", "failed"], "description": "Optioneel: filter op status - 'pending' (in behandeling), 'completed' (afgerond), 'failed' (mislukt)" }
          }
        ],
        "responses": {
          "200": {
            "description": "Lijst met inzendingen",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Inzending"
                      },
                      "description": "Array met alle inzendingen van de leerling"
                    },
                    "message": { "type": "string", "example": "8 inzendingen gevonden" }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geen toegang tot leerling",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/teachers/{teacherId}/students/{studentId}/feedback": {
      "get": {
        "summary": "Alle feedback voor leerling ophalen",
        "description": "Haalt alle feedback (zowel AI-gegenereerde als handmatig ingevoerde feedback van de docent) op voor een leerling. Kan gefilterd worden op specifieke inzending. Feedback bevat details over problemen, suggesties en ernst niveau.",
        "tags": ["Docent - Leerlingenbeheer"],
        "parameters": [
          {
            "name": "teacherId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de docent"
          },
          {
            "name": "studentId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de leerling"
          },
          {
            "name": "submissionId",
            "in": "query",
            "schema": { "type": "integer" },
            "description": "Optioneel: filter feedback op specifieke inzending ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Lijst met feedback",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Feedback"
                      },
                      "description": "Array met feedback items"
                    },
                    "message": { "type": "string", "example": "15 feedback items gevonden" }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geen toegang tot leerling",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/teachers/{teacherId}/students/{studentId}/manual-score": {
      "put": {
        "summary": "Handmatige score toekennen",
        "description": "Stelt een handmatige score in voor een inzending. Dit overschrijft of aanvult de automatisch berekende AI-score. De score moet tussen 0 en 100 liggen. Dit endpoint is bedoeld voor docenten om leerlingen feedback te geven op hun prestaties.",
        "tags": ["Docent - Leerlingenbeheer"],
        "parameters": [
          {
            "name": "teacherId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de docent"
          },
          {
            "name": "studentId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Unieke ID van de leerling"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Inzending ID en handmatige score",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "submissionId": {
                    "type": "integer",
                    "description": "Unieke ID van de inzending waarvoor score gegeven wordt",
                    "example": 42
                  },
                  "score": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100,
                    "description": "Score gegeven aan de inzending. Moet tussen 0 en 100 liggen.",
                    "example": 85
                  }
                },
                "required": ["submissionId", "score"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Score succesvol ingesteld",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "submissionId": { "type": "integer", "example": 42 },
                        "score": { "type": "number", "example": 85 }
                      }
                    },
                    "message": { "type": "string", "example": "Score succesvol ingesteld op 85" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Ongeldig verzoek - score buiten bereik of ontbreekt",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "message": { "type": "string", "example": "Score moet een getal tussen 0 en 100 zijn" }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geen toegang tot leerling",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Inzending niet gevonden",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "message": { "type": "string", "example": "Inzending niet gevonden" }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "LeerlingLijstItem": {
        "type": "object",
        "description": "Vereenvoudigd profiel van een leerling in een cursus voor lijstweergave",
        "properties": {
          "id": { "type": "integer", "description": "Unieke leerling ID" },
          "name": { "type": "string", "description": "Volledige naam van de leerling" },
          "email": { "type": "string", "format": "email", "description": "Email adres van de leerling" },
          "github_id": { "type": "string", "description": "GitHub gebruikersnaam (indien gekoppeld)" },
          "enrolled_date": { "type": "string", "format": "date-time", "description": "Datum en tijd van inschrijving in deze cursus" },
          "submission_count": { "type": "integer", "description": "Totaal aantal inzendingen van deze leerling" },
          "average_score": { "type": "number", "description": "Gemiddelde score van alle inzendingen (0-100)" }
        }
      },
      "LeerlingProfiel": {
        "type": "object",
        "description": "Gedetailleerd profiel van een leerling met persoonlijke informatie",
        "properties": {
          "id": { "type": "integer", "description": "Unieke leerling ID in het systeem" },
          "name": { "type": "string", "description": "Volledige naam van de leerling" },
          "email": { "type": "string", "format": "email", "description": "Geregistreerd email adres van de leerling" },
          "github_id": { "type": "string", "description": "GitHub gebruikersnaam van de leerling" },
          "role": { "type": "string", "enum": ["student", "docent", "beheerder"], "description": "Rol van de leerling in het systeem" },
          "created_at": { "type": "string", "format": "date-time", "description": "Datum en tijd van accountaanmaak" },
          "updated_at": { "type": "string", "format": "date-time", "description": "Datum en tijd van laatste wijziging aan profiel" }
        }
      },
      "LeerlingVoortgang": {
        "type": "object",
        "description": "Gedetailleerd voortgangsoverzicht van een leerling inclusief statistieken",
        "properties": {
          "submissions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Inzending"
            },
            "description": "Array met alle inzendingen van de leerling"
          },
          "statistics": {
            "type": "object",
            "description": "Statistieken over de voortgang van de leerling",
            "properties": {
              "total_submissions": { "type": "integer", "description": "Totaal aantal inzendingen" },
              "completed_submissions": { "type": "integer", "description": "Aantal afgeronde inzendingen" },
              "pending_submissions": { "type": "integer", "description": "Aantal inzendingen in behandeling" },
              "average_score": { "type": "number", "description": "Gemiddelde score van alle inzendingen" },
              "highest_score": { "type": "number", "description": "Hoogste behaalde score" },
              "lowest_score": { "type": "number", "description": "Laagste behaalde score" }
            }
          }
        }
      },
      "Inzending": {
        "type": "object",
        "description": "Details van een inzending (opdracht) door een leerling",
        "properties": {
          "id": { "type": "integer", "description": "Unieke inzending ID" },
          "assignment_id": { "type": "integer", "description": "ID van de opdracht waarvan dit een inzending is" },
          "assignment_title": { "type": "string", "description": "Titel van de opdracht" },
          "status": { "type": "string", "enum": ["pending", "completed", "failed"], "description": "Status van de inzending: pending (in behandeling), completed (afgerond), failed (mislukt)" },
          "ai_score": { "type": "integer", "description": "Automatisch berekende score door AI-systeem (0-100)" },
          "manual_score": { "type": "integer", "description": "Handmatig toegekende score door docent (0-100)" },
          "final_score": { "type": "integer", "description": "Definitieve score (kan handmatig of automatisch gegenereerd zijn)" },
          "github_url": { "type": "string", "format": "url", "description": "Link naar de GitHub repository van deze inzending" },
          "commit_sha": { "type": "string", "description": "Git commit hash van de inzending" },
          "created_at": { "type": "string", "format": "date-time", "description": "Datum en tijd van inzending" },
          "updated_at": { "type": "string", "format": "date-time", "description": "Datum en tijd van laatste update" },
          "feedback_count": { "type": "integer", "description": "Aantal feedback items voor deze inzending" }
        }
      },
      "Feedback": {
        "type": "object",
        "description": "Feedback item op een inzending - kan AI-gegenereerd of handmatig zijn",
        "properties": {
          "id": { "type": "integer", "description": "Unieke feedback ID" },
          "submission_id": { "type": "integer", "description": "ID van de inzending waarop dit feedback betrekking heeft" },
          "assignment_id": { "type": "integer", "description": "ID van de opdracht" },
          "assignment_title": { "type": "string", "description": "Titel van de opdracht" },
          "content": { "type": "string", "description": "Inhoud van het feedback bericht" },
          "reviewer": { "type": "string", "enum": ["ai", "docent"], "description": "Bron van het feedback: 'ai' (automatisch gegenereerd) of 'docent' (handmatig ingevoerd)" },
          "severity": { "type": "string", "enum": ["low", "medium", "high", "critical"], "description": "Ernstgraad van het feedback: low (laag), medium (gemiddeld), high (hoog), critical (kritiek)" },
          "line_number": { "type": "integer", "description": "Optioneel: regelnummer in de code waarop feedback betrekking heeft" },
          "suggestion": { "type": "string", "description": "Optioneel: suggestie voor verbetering" },
          "type": { "type": "string", "description": "Type feedback (bijv. 'syntax error', 'best practice', 'documentation')" },
          "created_at": { "type": "string", "format": "date-time", "description": "Datum en tijd van feedback creatie" }
        }
      },
      "Cursus": {
        "type": "object",
        "description": "Details van een cursus/vak in het systeem",
        "properties": {
          "id": { "type": "integer", "description": "Unieke cursus ID" },
          "title": { "type": "string", "description": "Titel/naam van de cursus" },
          "description": { "type": "string", "description": "Beschrijving van de cursus inhoud en doelstellingen" },
          "join_code": { "type": "string", "description": "Unieke deelcode waarmee leerlingen zich kunnen aansluiten bij deze cursus" },
          "created_at": { "type": "string", "format": "date-time", "description": "Datum en tijd van cursus aanmaak" }
        }
      },
      "Gebruiker": {
        "type": "object",
        "description": "Basisgegevens van een gebruiker in het systeem",
        "properties": {
          "id": { "type": "integer", "description": "Unieke gebruiker ID" },
          "email": { "type": "string", "format": "email", "description": "Uniek email adres van de gebruiker" },
          "name": { "type": "string", "description": "Volledige naam van de gebruiker" },
          "role": { "type": "string", "enum": ["student", "docent", "beheerder"], "description": "Rol van de gebruiker in het systeem" }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT Token authenticatie. BELANGRIJK: Voeg het token toe in de Authorization header, NIET in de request body. Format: 'Authorization: Bearer <uw_jwt_token>'. Verkrijg een token via POST /users/login of POST /users/register. Token geldig voor 1 uur (3600 seconden)."
      }
    }
  }
}
