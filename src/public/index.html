<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StuReflect - AI Feedback Test</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>StuReflect AI Feedback</h1>
      <p class="subtitle">Test interface voor AI code analyse</p>
    </header>

    <!-- Direct Test Form -->
    <section class="card">
      <h2>Direct Test (zonder database)</h2>
      <form id="directTestForm">
        <div class="form-group">
          <label for="testGithubUrl">GitHub Repository URL</label>
          <input type="url" id="testGithubUrl" placeholder="https://github.com/username/repo" required>
          <small>Analyseer direct een publieke GitHub repo</small>
        </div>
        <button type="submit" class="btn btn-primary">
          <span class="btn-text">Analyseer Nu</span>
          <span class="btn-loading" style="display:none;">Analyseren...</span>
        </button>
      </form>
      <div id="testResult" class="result-message"></div>
    </section>

    <!-- Submission Form -->
    <section class="card" style="opacity: 0.6;">
      <h2>Database Submission (optioneel)</h2>
      <form id="submissionForm">
        <div class="form-group">
          <label for="githubUrl">GitHub Repository URL</label>
          <input type="url" id="githubUrl" placeholder="https://github.com/username/repo" required>
          <small>Bijv: https://github.com/jouw-username/jouw-repo</small>
        </div>
        <div class="form-group">
          <label for="assignmentId">Assignment ID</label>
          <input type="number" id="assignmentId" value="1" min="1" required>
          <small>ID van de opdracht in de database</small>
        </div>
        <div class="form-group">
          <label for="studentId">Student ID</label>
          <input type="number" id="studentId" value="1" min="1" required>
          <small>ID van de student (voor development)</small>
        </div>
        <button type="submit" class="btn btn-primary">
          <span class="btn-text">Repository Indienen</span>
          <span class="btn-loading" style="display:none;">Bezig...</span>
        </button>
      </form>
      <div id="submitResult" class="result-message"></div>
    </section>

    <!-- Submissions List -->
    <section class="card">
      <div class="card-header">
        <h2>Mijn Submissions</h2>
        <button id="refreshBtn" class="btn btn-secondary">Refresh</button>
      </div>
      <div id="submissionsList" class="submissions-list">
        <p class="loading">Laden...</p>
      </div>
    </section>

    <!-- Feedback Modal -->
    <div id="feedbackModal" class="modal" style="display:none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>AI Feedback</h2>
          <button class="close-btn" onclick="closeFeedbackModal()">&times;</button>
        </div>
        <div id="feedbackContent" class="feedback-content">
          <!-- Feedback items loaded here -->
        </div>
      </div>
    </div>

    <!-- Webhook Info -->
    <section class="card info-card">
      <h2>Hoe werkt het?</h2>
      <ol>
        <li>Dien je GitHub repository URL in</li>
        <li>Er wordt automatisch een webhook geregistreerd</li>
        <li>Maak een commit en push naar je repo</li>
        <li>De AI analyseert automatisch je code</li>
        <li>Bekijk de feedback door op "Feedback" te klikken</li>
      </ol>
      <p class="note">
        <strong>Let op:</strong> Voor lokale ontwikkeling moet de webhook URL publiek bereikbaar zijn.
        Gebruik een tool zoals <a href="https://ngrok.com" target="_blank">ngrok</a> om je lokale server te exposen.
      </p>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>
